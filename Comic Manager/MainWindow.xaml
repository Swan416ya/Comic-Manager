<Window
    x:Class="Comic_Manager.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!-- 根容器 -->
    <Grid>
        <!-- 定义两行：第一行给标题栏，第二行给主体内容 -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 自动高度，通常标题栏是32-48px -->
            <RowDefinition Height="*"/>
            <!-- 剩余空间全给下面 -->
        </Grid.RowDefinitions>

        <!-- === 自定义标题栏 === -->
        <!-- 这个 Grid 就是用户用来拖动窗口的地方 -->
        <Grid x:Name="AppTitleBar" Grid.Row="0" Height="32" VerticalAlignment="Top">
            <!-- 这里的图标和文字会显示在窗口最顶端 -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0,0,0">
                <Image Source="Assets/StoreLogo.png" Width="16" Height="16" Margin="0,0,12,0"/>
                <!-- 标题文字 -->
                <TextBlock Text="Comic Manager" 
                           Style="{StaticResource CaptionTextBlockStyle}" 
                           Opacity="0.8"/>
            </StackPanel>
        </Grid>

        <!-- === 主导航视图 === -->
        <!-- Grid.Row="1" 表示它放在第二行 -->
        <!-- IsBackButtonVisible="Collapsed" 去掉返回按钮 -->
        <!-- Margin-Top="-32" 是为了让侧边栏背景延伸到标题栏后面，制造沉浸感 -->
        <NavigationView x:Name="MainNav" 
                        Grid.Row="0" Grid.RowSpan="2"
                        ItemInvoked="MainNav_ItemInvoked" 
                        PaneDisplayMode="Auto"
                        IsBackButtonVisible="Collapsed"
                        IsTitleBarAutoPaddingEnabled="False"
                        Margin="0,32,0,0"
                        IsSettingsVisible="False">

            <!-- 侧边栏内容 -->
            <NavigationView.MenuItems>
                <!-- 使用 FontIcon 代替 SymbolIcon -->
                <!-- Glyph 是图标的字符编码 -->
                <NavigationViewItem Content="全部漫画" Tag="All" IsSelected="True">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE8F1;" FontFamily="Segoe Fluent Icons"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <NavigationViewItemSeparator/>
                <NavigationViewItemHeader Content="我的书架"/>

                <!-- 动态分类会加在这里 -->
            </NavigationView.MenuItems>

            <NavigationView.FooterMenuItems>
                <!-- 这是你之前的添加按钮 -->
                <NavigationViewItem Content="添加分类" Tag="AddCategory">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE710;" FontFamily="Segoe Fluent Icons"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>

                <!-- 【新增】设置按钮 -->
                <NavigationViewItem Content="设置" Tag="Settings">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE713;" FontFamily="Segoe Fluent Icons"/>
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.FooterMenuItems>

            <Frame x:Name="ContentFrame">
                <TextBlock Text="欢迎回来" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Frame>

        </NavigationView>
    </Grid>
</Window>